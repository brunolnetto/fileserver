{% extends 'web/base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
<h1>Login</h1>
<form method="post" id="login-form" class="form-container">
    {% csrf_token %}
    
    <!-- Username Field -->
    <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" class="form-control form-control-sm" placeholder="Enter your username" required>
    </div>
    
    <!-- Password Field -->
    <div class="form-group">
        <label for="password">Password:</label>
        <div class="password-container position-relative">
            <input type="password" id="password" name="password" class="form-control form-control-sm" placeholder="Enter your password" required>
            <button type="button" id="togglePassword" class="toggle-password btn btn-secondary">
                <i class="bi bi-eye"></i>
            </button>
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary">Login</button>
</form>

<!-- Password Reset Link -->
<div class="mt-3 text-center">
    <a href="{% url 'password_reset' %}">Forgot password?</a>
</div>

<script>
    // Toggle password visibility
    document.getElementById('togglePassword').addEventListener('click', function() {
        var passwordField = document.getElementById('password');
        var type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
        var icon = this.querySelector('i');
        icon.classList.toggle('bi-eye', type === 'password');
        icon.classList.toggle('bi-eye-slash', type === 'text');
        
        // Remove focus from the button after clicking
        this.blur();
    });
</script>

<style>
    .password-container {
        position: relative;
    }

    .toggle-password {
        position: absolute;
        right: 10px; /* Adjust as needed */
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: transparent;
        cursor: pointer;
        padding: 0;
        z-index: 2; /* Ensures the button is above other elements */
        outline: none; /* Remove outline on focus */
    }

    .toggle-password i {
        font-size: 1.5em; /* Increased icon size */
        color: #007bff; /* Primary color for visibility */
        transition: color 0.3s ease; /* Smooth transition for color change */
    }

    .toggle-password:hover i {
        color: #0056b3; /* Lighter shade for hover effect */
    }

    .form-control {
        padding-right: 3em; /* Adjust padding to make room for the icon */
    }

    .toggle-password:focus, .toggle-password:active {
        outline: none; /* Remove default focus outline */
        box-shadow: none; /* Remove focus box-shadow if any */
    }
</style>

{% endblock %}
